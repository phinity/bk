/*This is a personal project for "me". Copyright 2016 Ben Korody <me@benkorody.com>*/!function(){function mobileClassing(newmobile,newwidescreen){newmobile?($("body").addClass("mobile"),$("body").removeClass("desktop")):($("body").removeClass("mobile"),$("body").addClass("desktop")),newwidescreen?$("body").addClass("widescreen"):$("body").removeClass("widescreen")}window.me=window.me||{};var init=function(){$(window).resize(function(e){mobileChange()}),mobileChange()},mobileChange=function(){var newmobile=$(window).width()<767;(newmobile!=me.mobile||"undefined"==typeof me.mobile)&&(mobileClassing(newmobile),$(window).trigger("mobileChange",newmobile),me.mobile=newmobile);var newwidescreen=$(window).width()>1140;(newwidescreen!=me.widescreen||"undefined"==typeof me.widescreen)&&(mobileClassing(newmobile,newwidescreen),$(window).trigger("widescreenChange",newwidescreen),me.widescreen=newwidescreen)};$(function(){init()})}(),function(){window.me=window.me||{};var init=function(){pageStats(),card.init(),scrollAppear(),me.scrollToAnchor(),backgroundImageScroll(),setTimeout(function(){backgroundImageScroll()},900)};window.ana={};var pageStats=function(){ana={winHeight:$(window).height(),winWidth:$(window).width(),docHeight:$(document).height(),scrollTop:$(window).scrollTop()}},card={select:".card-flip",$cardContainer:!1,cardTimeout:!1,cardFocus:!1,init:function(){card.$cardContainer=$(card.select),card.$cardContainer.find(".card-handle").bind("click",function(e){e.preventDefault();var _this=$(this).parents(card.select)||$(this);card.toggle(_this)}),card.$cardContainer.focus(function(e){card.cardFocus=$(this)}).blur(function(e){card.cardFocus=!1}),$(document).bind("keydown",function(e){e=e||window.event;var charCode=e.which||e.keyCode;13==charCode&&card.cardFocus&&card.toggle(card.cardFocus)}),card.$cardContainer.hover(function(){if($(this).hasClass("card-hover")){$(this).addClass("animating");var _this=$(this);card.cardTimeout=setTimeout(function(){_this.hasClass("card-active")||card.toggleActive(_this)},1500)}},function(){clearTimeout(card.cardTimeout)})},toggle:function(_this){$(_this).hasClass("card-active")?card.toggleInactive(_this):card.toggleActive(_this),clearTimeout(card.cardTimeout)},toggleInactive:function(_this){_this.removeClass("card-active").blur()},toggleActive:function(_this){var toggleSet=_this.data("flip");card.$cardContainer.each(function(){$(this).data("flip")==toggleSet&&$(this).removeClass("card-active")}),_this.addClass("card-active"),_this.addClass("animating"),setTimeout(function(){_this.removeClass("animating")},500)}},scrollAppear=function(){$().appear&&(me.mobile?$(".withAnimation").removeClass("withAnimation"):($(".withAnimation .appear").appear(),$(".withAnimation .appear").on("appear",function(e,$els){$els.each(function(){$(this).addClass("active animated");var $fx=$(this).data("fx");"undefined"!=typeof $fx&&$(this).addClass($(this).data("fx"))})}),$(".withAnimation .appear").on("disappear",function(e,$els){$els.each(function(){$(this).removeClass("active");var $fx=$(this).data("fx");"undefined"!=typeof $fx&&$(this).removeClass($(this).data("fx"))})})))};me.scrollToAnchor=function(){$("a.scroll-to[href*=#]:not([href=#])").click(function(e){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var target=$(this.hash);target=target.length?target:$("[name="+this.hash.slice(1)+"]");var myOffset=$(this).data("offset")||20,mySpeed=$(this).data("speed")||1e3,myEase=$(this).data("ease")||"swing";if(myDefault=$(this).data("default")||"true",target.length){var myTop=target.offset().top-myOffset;me.scrollTo(myTop,mySpeed,myEase),"true"==myDefault&&e.preventDefault()}}})},me.scrollTo=function(myTop,mySpeed,myEase){$("html,body").animate({scrollTop:myTop},mySpeed,myEase),$("html, body").bind("scroll mousedown DOMMouseScroll mousewheel keyup scrollstart touchstart touchmove",function(){$("html, body").hasClass("scroll-force")||$(this).stop()})};var backgroundImageScroll=function(){$(".bg-scroll").each(function(){var $background=$(this),align=$background.data("align"),reposition=function(){if(me.mobile||me.widescreen)$background.css("background-position",align+" 50%");else if(pageStats(),offset=$background.offset().top,ana.scrollTop>=offset-ana.winHeight){var delta;delta=offset<ana.winHeight?ana.scrollTop/2:(ana.scrollTop-offset)/2;$background.css("background-position",align+" "+delta+"px")}};$(window).on("throttledresize",function(){reposition()}),$(window).on("scroll",function(){reposition()}),$(window).resize(function(e){reposition()}),reposition()})};$(function(){init()})}(),function(document,window){"use strict";var pfx=function(){var style=document.createElement("dummy").style,prefixes="Webkit Moz O ms Khtml".split(" "),memory={};return function(prop){if("undefined"==typeof memory[prop]){var ucProp=prop.charAt(0).toUpperCase()+prop.substr(1),props=(prop+" "+prefixes.join(ucProp+" ")+ucProp).split(" ");memory[prop]=null;for(var i in props)if(void 0!==style[props[i]]){memory[prop]=props[i];break}}return memory[prop]}}(),arrayify=function(a){return[].slice.call(a)},css=function(el,props){var key,pkey;for(key in props)props.hasOwnProperty(key)&&(pkey=pfx(key),null!==pkey&&(el.style[pkey]=props[key]));return el},toNumber=function(numeric,fallback){return isNaN(numeric)?fallback||0:Number(numeric)},byId=function(id){return document.getElementById(id)},$=function(selector,context){return context=context||document,context.querySelector(selector)},$$=function(selector,context){return context=context||document,arrayify(context.querySelectorAll(selector))},triggerEvent=function(el,eventName,detail){var event=document.createEvent("CustomEvent");event.initCustomEvent(eventName,!0,!0,detail),el.dispatchEvent(event)},translate=function(t){return" translate3d("+t.x+"px,"+t.y+"px,"+t.z+"px) "},rotate=function(r,revert){var rX=" rotateX("+r.x+"deg) ",rY=" rotateY("+r.y+"deg) ",rZ=" rotateZ("+r.z+"deg) ";return revert?rZ+rY+rX:rX+rY+rZ},scale=function(s){return" scale("+s+") "},perspective=function(p){return" perspective("+p+"px) "},getElementFromHash=function(){return byId(window.location.hash.replace(/^#\/?/,""))},computeWindowScale=function(config){var hScale=window.innerHeight/config.height,wScale=window.innerWidth/config.width,scale=hScale>wScale?wScale:hScale;return config.maxScale&&scale>config.maxScale&&(scale=config.maxScale),config.minScale&&scale<config.minScale&&(scale=config.minScale),1},body=document.body,ua=navigator.userAgent.toLowerCase(),impressSupported=null!==pfx("perspective")&&body.classList&&body.dataset&&-1===ua.search(/(iphone)|(ipod)|(android)/);impressSupported?(body.classList.remove("impress-not-supported"),body.classList.add("impress-supported")):body.className+=" impress-not-supported ";var roots={},defaults={width:1024,height:768,maxScale:1,minScale:0,perspective:1e3,transitionDuration:1750},empty=function(){return!1},impress=window.impress=function(rootId){if(!impressSupported)return{init:empty,"goto":empty,prev:empty,next:empty};if(rootId=rootId||"impress",roots["impress-root-"+rootId])return roots["impress-root-"+rootId];var stepsData={},activeStep=null,currentState=null,steps=null,config=null,windowScale=null,root=window.root=byId(rootId),canvas=window.canvas=document.createElement("div"),initialized=!1,lastEntered=null,onStepEnter=function(step){lastEntered!==step&&(triggerEvent(step,"impress:stepenter"),lastEntered=step)},onStepLeave=function(step){lastEntered===step&&(triggerEvent(step,"impress:stepleave"),lastEntered=null)},initStep=function(el,idx){var data=el.dataset,step={translate:{x:toNumber(data.x),y:toNumber(data.y),z:toNumber(data.z)},rotate:{x:toNumber(data.rotateX),y:toNumber(data.rotateY),z:toNumber(data.rotateZ||data.rotate)},scale:toNumber(data.scale,1),el:el,scrolling:data.scrolling||!1,translateYOffset:data.scrolling?"-"+.39*window.innerHeight+"px":"-65%",offset:{x:0,y:0,z:0},height:el.clientHeight};el.id||(el.id="step-"+(idx+1)),stepsData["impress-"+el.id]=step,css(el,{position:"absolute",transform:"translate(-50%,"+step.translateYOffset+")"+translate(step.translate)+rotate(step.rotate)+scale(step.scale),transformStyle:"preserve-3d"})},init=function(){if(!initialized){var meta=$("meta[name='viewport']")||document.createElement("meta");meta.content="width=device-width, minimum-scale=1, maximum-scale=1, user-scalable=no",meta.parentNode!==document.head&&(meta.name="viewport",document.head.appendChild(meta));var rootData=root.dataset;config={width:toNumber(rootData.width,defaults.width),height:toNumber(rootData.height,defaults.height),maxScale:toNumber(rootData.maxScale,defaults.maxScale),minScale:toNumber(rootData.minScale,defaults.minScale),perspective:toNumber(rootData.perspective,defaults.perspective),transitionDuration:toNumber(rootData.transitionDuration,defaults.transitionDuration)},windowScale=computeWindowScale(config),arrayify(root.childNodes).forEach(function(el){canvas.appendChild(el)}),root.appendChild(canvas),document.documentElement.style.height="100%",css(body,{height:"100%",overflow:"hidden"});var rootStyles={position:"absolute",transformOrigin:"top left",transition:"all 0s ease-out-expo",transformStyle:"preserve-3d"};css(root,rootStyles),css(root,{top:"50%",left:"50%",transform:perspective(config.perspective/windowScale)+scale(windowScale)}),css(canvas,rootStyles),body.classList.remove("impress-disabled"),body.classList.add("impress-enabled"),steps=$$(".step",root),steps.forEach(initStep),currentState={translate:{x:0,y:0,z:0},rotate:{x:0,y:0,z:0},scale:1},initialized=!0,triggerEvent(root,"impress:init",{api:roots["impress-root-"+rootId]})}},getStep=function(step){return"number"==typeof step?step=0>step?steps[steps.length+step]:steps[step]:"string"==typeof step&&(step=byId(step)),step&&step.id&&stepsData["impress-"+step.id]?step:null},stepEnterTimeout=null,goto=function(el,duration,delay,offset){if(el="undefined"!=typeof el&&el?el:activeStep,offset="undefined"==typeof offset?{x:0,y:0,z:0}:offset,!initialized||!(el=getStep(el)))return!1;window.scrollTo(0,0),window.blur();var step=stepsData["impress-"+el.id];activeStep&&(activeStep.classList.remove("active"),body.classList.remove("impress-on-"+activeStep.id)),el.classList.add("active"),body.classList.add("impress-on-"+el.id),step.offset.x+=offset.x,step.offset.y+=offset.y,step.offset.z+=offset.z;var target={rotate:{x:-step.rotate.x,y:-step.rotate.y,z:-step.rotate.z},translate:{x:-step.translate.x+step.offset.x,y:-step.translate.y+step.offset.y,z:-step.translate.z+step.offset.z},scale:1/step.scale},zoomin=target.scale>=currentState.scale;duration=toNumber(duration,config.transitionDuration);var delay=delay?delay:duration/2;el===activeStep&&(windowScale=computeWindowScale(config));var targetScale=target.scale*windowScale;return activeStep&&activeStep!==el&&onStepLeave(activeStep),css(root,{transform:perspective(config.perspective/targetScale)+scale(targetScale),transitionDuration:duration+"ms",transitionDelay:(zoomin?delay:0)+"ms"}),css(canvas,{transform:rotate(target.rotate,!0)+translate(target.translate),transitionDuration:duration+"ms",transitionDelay:(zoomin?0:delay)+"ms"}),(currentState.scale===target.scale||currentState.rotate.x===target.rotate.x&&currentState.rotate.y===target.rotate.y&&currentState.rotate.z===target.rotate.z&&currentState.translate.x===target.translate.x&&currentState.translate.y===target.translate.y&&currentState.translate.z===target.translate.z)&&(delay=0),currentState=target,activeStep=el,window.clearTimeout(stepEnterTimeout),stepEnterTimeout=window.setTimeout(function(){onStepEnter(activeStep)},duration+delay),el},prev=function(){var prev=steps.indexOf(activeStep)-1;return prev=prev>=0?steps[prev]:steps[steps.length-1],goto(prev)},next=function(){var next=steps.indexOf(activeStep)+1;return next=next<steps.length?steps[next]:steps[0],goto(next)};return root.addEventListener("impress:init",function(){steps.forEach(function(step){step.classList.add("future")}),root.addEventListener("impress:stepenter",function(event){event.target.classList.remove("past"),event.target.classList.remove("future"),event.target.classList.add("present")},!1),root.addEventListener("impress:stepleave",function(event){event.target.classList.remove("present"),event.target.classList.add("past")},!1)},!1),root.addEventListener("impress:init",function(){var lastHash="";root.addEventListener("impress:stepenter",function(event){window.location.hash=lastHash="#/"+event.target.id},!1),window.addEventListener("hashchange",function(){window.location.hash!==lastHash&&goto(getElementFromHash())},!1),goto(getElementFromHash()||steps[0],0)},!1),body.classList.add("impress-disabled"),roots["impress-root-"+rootId]={init:init,"goto":goto,next:next,prev:prev}};impress.supported=impressSupported}(document,window),function(document,window){"use strict";var throttle=function(fn,threshhold,scope){threshhold||(threshhold=50);var last,deferTimer;return function(){var context=scope||this,now=+new Date,args=arguments;last&&last+threshhold>now?(clearTimeout(deferTimer),deferTimer=setTimeout(function(){last=now,fn.apply(context,args)},threshhold)):(last=now,fn.apply(context,args))}};document.addEventListener("impress:init",function(event){var api=event.detail.api;document.addEventListener("keydown",function(event){(9===event.keyCode||event.keyCode>=32&&event.keyCode<=34||event.keyCode>=37&&event.keyCode<=40)&&event.preventDefault()},!1),document.addEventListener("keyup",function(event){if(9===event.keyCode||event.keyCode>=32&&event.keyCode<=34||event.keyCode>=37&&event.keyCode<=40){switch(event.keyCode){case 33:case 37:case 38:api.prev();break;case 9:case 32:case 34:case 39:case 40:api.next()}event.preventDefault()}},!1),document.addEventListener("click",function(event){for(var target=event.target;"A"!==target.tagName&&target!==document.documentElement;)target=target.parentNode;if("A"===target.tagName){var href=target.getAttribute("href");href&&"#"===href[0]&&(target=document.getElementById(href.slice(1)))}api["goto"](target)&&(event.stopImmediatePropagation(),event.preventDefault())},!1),document.addEventListener("click",function(event){for(var target=event.target;(!target.classList.contains("step")||target.classList.contains("active"))&&target!==document.documentElement;)target=target.parentNode;var data=target.dataset;data.target&&(target=document.getElementById(data.target)),api["goto"](target)&&event.preventDefault()},!1),document.addEventListener("touchstart",function(event){if(1===event.touches.length){var x=event.touches[0].clientX,width=.3*window.innerWidth,result=null;width>x?result=api.prev():x>window.innerWidth-width&&(result=api.next()),result&&event.preventDefault()}},!1),window.addEventListener("resize",throttle(function(){api["goto"](document.querySelector(".step.active"),500)},250),!1);var throttled=!0,throttledOffset=0,transitioning=!1,scrolled=function(e,oldNormal){e=e?e:window.event;var normal=(e.detail?e.detail:e.wheelDelta,e.detail?-1*e.detail:e.wheelDelta/20);"undefined"!=typeof oldNormal?normal=oldNormal:"";var el=document.querySelector(".step.active");setTimeout(function(){api["goto"](el,10,0,{x:0,y:throttledOffset,z:0}),transitioning=!0,throttledOffset=0,throttled=!0},10),throttledOffset+=normal,throttled=!1};window.addEventListener("mousewheel",scrolled,!0),window.addEventListener("DOMMouseScroll",scrolled,!0)},!1)}(document,window),function(){window.me=window.me||{},window.me.impressing=null;var init=function(){cooperPress()};cooperPress=function(){$(window).on("mobileChange",function(){window.me.impressing!=window.me.mobile&&location.reload(!1)}),setTimeout(function(){window.me.mobile?window.me.impressing=!1:(impress().init(),window.me.impressing=!0)},0)},$(function(){init()})}();